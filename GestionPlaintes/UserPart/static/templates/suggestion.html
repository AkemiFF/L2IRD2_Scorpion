{% load static %}
<!doctype html>
<html lang="fr">

<head>
    {% include 'head.html' %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/suggestion.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
</head>
<style>
    body {
        background: url("{% static 'img/suggestion.png'%}");
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-position: center center;
    }

    .container {
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
        background-color: transparent;
        margin-bottom: 20px;
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(255, 255, 255, 21.8);
    }
    label,p{
         color: #ccc;
    }
</style>

<body>
    <div class="wrapper">
        {% include 'nav.html' %}
        <div class="container">
            <h1>Suggérer une solution</h1>
            <p>
                Vous rencontrez un problème ?
                Dites-nous en plus et nous vous proposerons une solution.
            </p>
            <form action="#" method="post">
                <label for="probleme">Type de problème:</label>
                <select id="subject" name="subject">
                    {% for suggestion in suggestions %}
                        <option value="{{ suggestion.id }}">{{ suggestion.subject }}</option>
                    {% endfor %}
                </select><br>
                <div id="conseils"></div>
            </form>
        </div>
        <script src="{% static 'js/script.js'%}"></script>
        <script src="{% static 'js/suggestion.js'%}"></script>
        <script>
            document.getElementById("subject").addEventListener("change", function() {
                var selectedOption = this.value;
                var suggestions = JSON.parse('{{ suggestions_json|escapejs }}');
                var selectedSuggestion = suggestions.find(suggestion => suggestion.id === selectedOption);
                if (selectedSuggestion) {
                    document.getElementById("conseils").innerText = selectedSuggestion.text;
                } else {
                    document.getElementById("conseils").innerText = "";
                }
            });
        </script>

    </div>
</body>
</html>